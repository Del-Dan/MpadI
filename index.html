<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAYM Store | Elevate Your Style</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Outfit', 'sans-serif'], serif: ['Playfair Display', 'serif'] },
                    colors: { brand: { dark: '#0f0f0f', accent: '#C9A227', gray: '#F3F4F6', surface: '#ffffff' } },
                    animation: { 'fade-in': 'fadeIn 0.5s ease-out', 'slide-up': 'slideUp 0.6s ease-out' },
                    keyframes: {
                        fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
                        slideUp: { '0%': { transform: 'translateY(20px)', opacity: '0' }, '100%': { transform: 'translateY(0)', opacity: '1' } }
                    }
                }
            }
        }
    </script>
    <?!= include('css'); ?>
</head>

<body class="bg-white text-brand-dark font-sans antialiased">

    <!-- HEADER -->
    <header class="fixed w-full z-50 glass transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex items-center gap-4">
                    <button onclick="toggleSearch()" class="p-2 hover:bg-gray-100 rounded-full transition"><i
                            class="bi bi-search text-xl"></i></button>
                </div>
                <a href="#" onclick="window.location.reload()" class="flex flex-col items-center group">
                    <h1 class="font-bold text-3xl tracking-tighter leading-none group-hover:opacity-80 transition">FAYM
                    </h1>
                </a>
                <div class="flex items-center gap-4">
                    <button onclick="handleAuthClick()"
                        class="p-2 hover:bg-gray-100 rounded-full transition relative"><i class="bi bi-person text-xl"
                            id="authIcon"></i><span id="authStatusDot"
                            class="absolute top-2 right-2 w-2 h-2 bg-green-500 rounded-full hidden"></span></button>
                    <button onclick="toggleCart()"
                        class="p-2 hover:bg-gray-100 rounded-full transition relative group"><i
                            class="bi bi-bag text-xl group-hover:hidden"></i><i
                            class="bi bi-bag-fill text-xl hidden group-hover:block"></i><span id="cartCount"
                            class="absolute -top-0 -right-0 bg-brand-dark text-white text-[10px] font-bold h-4 w-4 rounded-full flex items-center justify-center opacity-0 transition-opacity">0</span></button>
                </div>
            </div>
        </div>
    </header>

    <!-- UI OVERLAYS -->
    <div id="searchOverlay"
        class="fixed inset-0 bg-white/98 z-[60] hidden flex-col transition-all duration-300 opacity-0 translate-y-[-10px]">
        <div class="max-w-4xl mx-auto w-full p-6 mt-20">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-serif">Search</h2>
                <button onclick="toggleSearch()" class="text-4xl hover:rotate-90 transition">&times;</button>
            </div>
            <div class="relative mb-8 bg-white rounded-lg shadow-sm border p-1 md:p-2 border-gray-200">
                <input type="text" id="searchInput" placeholder="Search products, colors..."
                    class="w-full text-2xl border-none py-2 px-4 focus:outline-none focus:ring-0 bg-transparent"
                    onkeyup="if(event.key === 'Enter') runSearchOrFilter()">
                <button onclick="runSearchOrFilter()"
                    class="absolute right-4 top-1/2 -translate-y-1/2 text-2xl text-gray-400 hover:text-black"><i
                        class="bi bi-arrow-right"></i></button>
            </div>
            <div class="flex flex-wrap gap-4 items-center">
                <select id="filterCategory" onchange="runSearchOrFilter()"
                    class="px-4 py-2 border rounded-full hover:border-black transition cursor-pointer bg-white">
                    <option value="all">All Categories</option>
                </select>
                <select id="filterPrice" onchange="runSearchOrFilter()"
                    class="px-4 py-2 border rounded-full hover:border-black transition cursor-pointer bg-white">
                    <option value="all">Any Price</option>
                    <option value="under100">Under GH₵100</option>
                    <option value="100to300">GH₵100 - GH₵300</option>
                    <option value="over300">Over GH₵300</option>
                </select>
                <label
                    class="flex items-center gap-2 cursor-pointer select-none border px-4 py-2 rounded-full hover:border-black transition"><input
                        type="checkbox" id="filterStock" onchange="runSearchOrFilter()" class="accent-black"><span>In
                        Stock Only</span></label>
                <button onclick="resetFilters()" class="text-red-500 text-sm hover:underline ml-auto font-bold">Reset
                    All</button>
            </div>
            <!-- Results Container REMOVED - filtering happens on main grid -->
        </div>
    </div>

    <!-- MAIN APP STRUCTURE -->
    <div id="heroSection" class="relative h-[85vh] w-full overflow-hidden bg-gray-100">
        <div id="sliderContainer" class="absolute inset-0 w-full h-full"></div>
        <div
            class="absolute inset-x-0 bottom-0 pb-20 pt-40 bg-gradient-to-t from-black/60 to-transparent flex flex-col items-center justify-center text-center px-4 z-10 pointer-events-none">
            <h2 id="heroTitle"
                class="text-4xl md:text-6xl font-serif text-white mb-4 drop-shadow-xl opacity-0 transition-opacity duration-700">
            </h2>
            <button onclick="scrollToGrid()"
                class="pointer-events-auto bg-white text-black px-8 py-3 rounded-full font-semibold hover:bg-brand-accent hover:text-white transition-all transform hover:scale-105 shadow-lg opacity-0 transition-opacity duration-700 delay-200"
                id="heroBtn">Explore Collection</button>
        </div>
    </div>

    <div id="latestDropsSection" class="hidden">
        <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 pt-16">
            <span class="text-xs font-bold tracking-widest text-brand-accent uppercase mb-2 block">Just In</span>
            <h2 class="text-3xl font-serif mb-8">Latest Drops</h2>
            <div id="latestGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
        </section>
    </div>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
        <div class="flex justify-between items-end mb-12">
            <div><span
                    class="text-xs font-bold tracking-widest text-brand-accent uppercase mb-2 block">Collection</span>
                <h2 class="text-3xl md:text-4xl font-serif">All Products</h2>
            </div>
        </div>
        <div id="productGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-y-12 gap-x-8">
            <div class="col-span-full py-20 flex justify-center">
                <div class="loader"></div>
            </div>
        </div>
    </main>

    <!-- MODALS & DRAWERS -->
    <div id="cartDrawer"
        class="fixed inset-y-0 right-0 w-full sm:w-[400px] bg-white shadow-2xl z-[70] transform translate-x-full transition-transform duration-300 flex flex-col">
        <div class="p-6 border-b flex justify-between items-center bg-gray-50">
            <h2 class="text-xl font-bold font-serif">Shopping Cart</h2><button onclick="toggleCart()"
                class="text-2xl hover:text-gray-500">&times;</button>
        </div>
        <div id="cartItems" class="flex-1 overflow-y-auto p-6 space-y-6"></div>
        <div class="p-6 border-t bg-gray-50">
            <div class="flex justify-between items-center mb-4"><span class="text-gray-600">Subtotal</span><span
                    id="cartSubtotal" class="font-bold text-xl">GH₵0</span></div><button onclick="checkout()"
                class="w-full bg-black text-white py-4 rounded-lg font-bold hover:bg-gray-800 transition">Checkout</button>
        </div>
    </div>
    <div onclick="toggleCart()" id="cartBackdrop"
        class="fixed inset-0 bg-black/50 z-[65] hidden transition-opacity opacity-0"></div>

    <div id="productModal" class="fixed inset-0 z-[80] hidden items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" onclick="closeModal()"></div>
        <div
            class="bg-white w-full max-w-5xl rounded-2xl overflow-hidden shadow-2xl z-10 relative flex flex-col md:flex-row max-h-[90vh]">
            <button onclick="closeModal()"
                class="absolute top-4 right-4 z-20 bg-white/50 p-2 rounded-full hover:bg-white transition"><i
                    class="bi bi-x-lg"></i></button>
            <div class="w-full md:w-1/2 bg-gray-100 relative h-[40vh] md:h-auto"><img id="modalImg" src=""
                    class="w-full h-full object-cover"></div>
            <div class="w-full md:w-1/2 p-8 md:p-12 overflow-y-auto bg-white">
                <div class="flex justify-between items-start">
                    <div><span id="modalCategory"
                            class="text-xs font-bold text-brand-accent uppercase tracking-wider"></span>
                        <h2 id="modalTitle" class="text-3xl font-serif mt-1 mb-2"></h2><span id="modalPrice"
                            class="text-xl font-bold"></span><span id="modalOldPrice"
                            class="text-sm text-gray-400 line-through hidden ml-2"></span>
                    </div>
                    <button onclick="toggleLikeFromModal()" id="modalLikeBtn"
                        class="text-2xl text-gray-300 hover:text-red-500 transition"><i
                            class="bi bi-heart"></i></button>
                </div>
                <div class="mt-8 space-y-6">
                    <div><span class="text-sm font-semibold text-gray-700 block mb-2">Color: <span
                                id="selectedColorName" class="text-black"></span></span>
                        <div id="modalColors" class="flex gap-3"></div>
                    </div>
                    <div>
                        <div class="flex justify-between mb-2"><span
                                class="text-sm font-semibold text-gray-700">Size</span><button
                                onclick="openSizeGuideModal()"
                                class="text-xs underline text-gray-500 hover:text-black">Size Guide</button></div>
                        <div id="modalSizes" class="grid grid-cols-4 gap-2"></div>
                    </div>
                    <p id="modalDesc" class="text-gray-600 text-sm"></p>
                    <button id="addToCartBtn" onclick="addToCartFromModal()" disabled
                        class="w-full py-4 bg-gray-200 text-gray-400 font-bold rounded-lg transition-all text-sm uppercase cursor-not-allowed">Select
                        Options</button>
                    <div id="addSuccessMsg"
                        class="hidden bg-green-50 text-green-700 p-3 rounded text-center text-sm font-bold border border-green-200">
                        Added to Cart!</div>
                </div>
            </div>
        </div>
    </div>

    <div id="sizeGuideModal" class="fixed inset-0 z-[85] hidden items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/60" onclick="closeSizeGuide()"></div>
        <div class="bg-white rounded-lg p-8 z-10 max-w-lg w-full relative">
            <button onclick="closeSizeGuide()" class="absolute top-4 right-4 text-xl">&times;</button>
            <h3 class="font-serif text-2xl mb-4">Size Guide</h3>
            <div id="sizeGuideContent" class="text-sm text-gray-600 space-y-2"></div>
        </div>
    </div>

    <div id="authModal" class="fixed inset-0 z-[90] hidden items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="closeAuth()"></div>
        <div class="bg-white w-full max-w-md rounded-2xl p-8 z-10 relative shadow-2xl">
            <div id="authForms">
                <div id="loginForm">
                    <h2 class="text-2xl font-serif mb-6 text-center">Welcome Back</h2>
                    <form onsubmit="handleLogin(event)" class="space-y-4">
                        <input type="email" name="email" placeholder="Email" required class="w-full p-3 border rounded">
                        <input type="password" name="password" placeholder="Password" required
                            class="w-full p-3 border rounded">
                        <button type="submit" class="w-full bg-black text-white py-3 rounded font-bold">Log In</button>
                    </form>
                    <p class="mt-4 text-center text-sm text-gray-500">No account? <button
                            onclick="switchAuth('register')" class="text-black underline font-bold">Sign Up</button></p>
                </div>
                <div id="registerForm" class="hidden">
                    <h2 class="text-2xl font-serif mb-6 text-center">Create Account</h2>
                    <form onsubmit="handleRegister(event)" class="space-y-4">
                        <input type="text" name="fullName" placeholder="Name" required
                            class="w-full p-3 border rounded">
                        <input type="email" name="email" placeholder="Email" required class="w-full p-3 border rounded">
                        <input type="tel" name="phone" placeholder="Phone" required class="w-full p-3 border rounded">
                        <input type="password" name="password" placeholder="Password (Min 6)" required minlength="6"
                            class="w-full p-3 border rounded">
                        <div id="regError" class="hidden text-red-500 text-xs text-center"></div>
                        <button type="submit" class="w-full bg-black text-white py-3 rounded font-bold">Sign Up</button>
                    </form>
                    <p class="mt-4 text-center text-sm text-gray-500">Have account? <button
                            onclick="switchAuth('login')" class="text-black underline font-bold">Log In</button></p>
                </div>
            </div>
        </div>
    </div>

    <a href="https://wa.me/233535284878" target="_blank"
        class="fixed bottom-6 right-6 bg-[#25D366] text-white p-4 rounded-full shadow-2xl z-40 hover:scale-110 transition flex items-center justify-center"><i
            class="bi bi-whatsapp text-2xl"></i></a>

    <?!= include('js'); ?>
</body>

</html>